{% extends "layout.html"%}
{% block content%}


	<div class="container">
			<div class="row">
				

			
			<video id="video" src="img/StarWars.mp4" mute autoplay onclick="recognize_snapshot()"></video>
			<div id="transcription">
				<div id="text">
					Click on the video to capture your command's picture.
				</div>
			</div>

			</div>
			
		

	</div>
  				

{% endblock %}

{% block footer%}

{{super()}}

<script>
			function recognize_snapshot(){
				document.getElementById('text').innerText = "(Recognizing your command...)"
				document.getElementById('transcription').className = "recognizing"
				OCRAD(document.getElementById("video"), {
				}, function(text){
					console.log(text.replace(/\W/g, ''));

					document.getElementById('transcription').className = "done"
					document.getElementById('text').innerText = text || "(empty)";
				})
			}

			function acquiredVideo(stream){
				var video = document.getElementById('video')
				if ('mozSrcObject' in video) { video.mozSrcObject = stream;
				} else if (window.webkitURL) { video.src = window.webkitURL.createObjectURL(stream);
				} else { video.src = stream; }
				video.play();

				
			}
			window.onload = function(){
				navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;
				if(navigator.getUserMedia) navigator.getUserMedia({ video: true }, acquiredVideo, function(){})
			}
		</script>

<script type="text/javascript" src="javascripts/write.js"></script>

{% endblock %}

